<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <title>Audio Translater</title>
    <link rel="icon" type="image/x-icon" href="/static/assets/favicon.png">
</head>
<body class="bg h-auto img-fluid">
        <div class="container">
            <div class="d-flex flex-column align-items-center justify-content-center">
                
                <img src="/static/assets/logo.png" class="img-fluid mt-5 mb-2 myImage" alt="logo">
        
                <div class="d-flex flex-column align-items-center justify-content-center w-75">Welcome to Audio Translater â€“ your AI-powered solution for easy audio transcription and translation.
                    Select your desired output language, then record or upload an audio file. It's that simple!
                   Break down language barriers effortlessly with our streamlined platform.
                   Try Audio Translater now for accurate and efficient result.</div>

                   <div class="bg-dark rounded-3 p-4 w-auto my-4 d-flex flex-column align-items-start">
                    <form method="post" class="d-flex flex-column" enctype="multipart/form-data">
                        <div class="d-flex flex-row align-items-center">
                            <h4 class="my-2 w-50">Translate to:</h4>
                            <select name="languages" id="languages" class="btn btn-light dropdown-toggle h-auto text-start">
                                <option value="fr">French</option>
                                <option value="sp">Spanish</option>
                                <option value="pt" disabled>Portuguese</option>
                            </select>
                        </div>
                        <div class="d-flex flex-column my-2">
                            <div class="d-flex flex-row align-items-center">
                                <h4 class="my-2 w-50">Select your file:</h4>
                                <div class="w-50 my-2 d-flex flex-column">
                                    <label for="formFile" class="form-label mb-0"></label>
                                    <input class="form-control align-self-center" type="file" id="audioFile" name="audioFile">
                                </div>
                            </div>
                
                            <div class="d-flex flex-row">
                                <div class="me-4">Don't have a file? Record and download your own.</div>
                                <input type="checkbox" id="record" name="record" value="Record" class="me-2">
                                <label for="record">Record</label>
                            </div>
                        </div>
                
                        <div class="record-group mt-3 text-center" style="display: none;">
                            <div class="d-flex flex-row align-items-center">
                                <h4 class="me-4 my-2">Record your message:</h4>
                                <div class="form-group">
                                    <button id="startRecording" class="btn btn-primary" type="button">Start</button>
                                    <button id="stopRecording" class="btn btn-danger" type="button" disabled>Stop</button>
                                </div>
                            </div>
                            <audio id="audioPlayer" controls autoplay muted class="mt-3 mx-auto w-full"></audio>
                        </div>
                
                        <div class="d-flex align-self-center mt-4">
                            <input type="submit" value="Send" class="btn btn-light px-4" id="send">
                        </div>
                    </form>
                </div>
                
                {% if translation %}
                    <div class="d-flex flex-column flex-md-row">
                        <div class="bg-dark rounded-3 w-full w-md-50 p-4 align-items-center my-4 me-md-2">
                            <h4>Transcription</h4>
                            <div id="transcription" class="">{{ answer }}</div>
                        </div>
                        <div id="translation" class="bg-dark rounded-3 w-full w-md-50 p-4 align-items-center my-4">
                            <h4>Translation</h4>
                            {{ translation }}
                        </div>
                    </div>
                {% endif%}

                {% if error %}
                    <div class="alert alert-danger" role="alert" id="error">
                        {{ error }}
                    </div>
                {% endif %}

            </div>

            <div id="overlay" class="overlay d-none"></div>
            <div id="loading-indicator" class="loading-indicator d-none">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
        <footer class="position-absolute top-0 mb-2">
            <a class="credit-link" href="https://www.freepik.com/free-vector/colorful-equalizer-wave-background_6849398.htm#query=audio&position=0&from_view=search&track=sph&uuid=5ab1099d-1bab-4ea4-aae9-784564b73b91">Image by pikisuperstar</a>&nbsp;on Freepik
        </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="/static/js/script.js"></script>
</body>
</html>